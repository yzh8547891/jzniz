-- å°†æ­¤è„šæœ¬æ”¾å…¥ï¼šStarterGui > ScreenGui > LocalScript
-- å¦‚æœæ²¡æœ‰ScreenGuiï¼Œè¯·å…ˆåˆ›å»ºï¼šStarterGuiä¸­å³é”® -> æ’å…¥å¯¹è±¡ -> ScreenGui

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- æ£€æŸ¥æ˜¯å¦åœ¨Studioä¸­è¿è¡Œ
local isStudio = RunService:IsStudio()

-- åˆ›å»ºUIå®¹å™¨
local screenGui = script.Parent
local mainFrame = Instance.new("Frame")
mainFrame.Name = "EnhancementUI"
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0.5, -150, 0.1, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 35, 45)
mainFrame.BackgroundTransparency = 0.1
mainFrame.BorderSizePixel = 0

-- åœ†è§’
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

-- é˜´å½±
local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(0, 0, 0)
shadow.Thickness = 2
shadow.Transparency = 0.7
shadow.Parent = mainFrame

-- æ ‡é¢˜
local titleLabel = Instance.new("TextLabel")
titleLabel.Text = "âš¡ æ¸¸æˆå¢å¼ºç³»ç»Ÿ"
titleLabel.Size = UDim2.new(1, 0, 0, 40)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundColor3 = Color3.fromRGB(40, 45, 60)
titleLabel.BackgroundTransparency = 0.1
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 18
titleLabel.TextXAlignment = Enum.TextXAlignment.Center

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 12, 0, 0)
titleCorner.Parent = titleLabel

-- å…³é—­æŒ‰é’®
local closeButton = Instance.new("TextButton")
closeButton.Text = "Ã—"
closeButton.Size = UDim2.new(0, 40, 0, 40)
closeButton.Position = UDim2.new(1, -40, 0, 0)
closeButton.BackgroundTransparency = 1
closeButton.TextColor3 = Color3.fromRGB(255, 100, 100)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 24
closeButton.ZIndex = 2
closeButton.Parent = titleLabel

-- æŒ‰é’®å®¹å™¨
local buttonContainer = Instance.new("Frame")
buttonContainer.Name = "ButtonContainer"
buttonContainer.Size = UDim2.new(1, -20, 1, -60)
buttonContainer.Position = UDim2.new(0, 10, 0, 50)
buttonContainer.BackgroundTransparency = 1
buttonContainer.Parent = mainFrame

-- æŒ‰é’®å¸ƒå±€
local buttonLayout = Instance.new("UIGridLayout")
buttonLayout.CellSize = UDim2.new(1, 0, 0, 45)
buttonLayout.CellPadding = UDim2.new(0, 0, 0, 10)
buttonLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
buttonLayout.VerticalAlignment = Enum.VerticalAlignment.Top
buttonLayout.Parent = buttonContainer

-- ç»„è£…UI
titleLabel.Parent = mainFrame
mainFrame.Parent = screenGui

-- çŠ¶æ€å­˜å‚¨
local enhancementStates = {
    invincible = false,
    highJump = false,
    speedBoost = false
}

-- åŸå§‹å±æ€§å­˜å‚¨ï¼ˆç”¨äºæ¢å¤ï¼‰
local originalProperties = {
    jumpPower = 50,
    walkSpeed = 16,
    maxHealth = 100
}

-- æŒ‰é’®åˆ›å»ºå‡½æ•°
local function createEnhancementButton(text, icon, callback)
    local button = Instance.new("TextButton")
    button.Text = icon .. " " .. text
    button.Size = UDim2.new(1, 0, 0, 45)
    button.BackgroundColor3 = Color3.fromRGB(60, 65, 80)
    button.BackgroundTransparency = 0.1
    button.TextColor3 = Color3.fromRGB(220, 220, 220)
    button.Font = Enum.Font.Gotham
    button.TextSize = 16
    button.AutoButtonColor = true
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(80, 85, 100)
    buttonStroke.Thickness = 1
    buttonStroke.Parent = button
    
    -- æ‚¬åœæ•ˆæœ
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(75, 80, 95)
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(60, 65, 80)
        }):Play()
    end)
    
    -- ç‚¹å‡»æ•ˆæœ
    button.MouseButton1Click:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.1), {
            Size = UDim2.new(0.95, 0, 0, 42)
        }):Play()
        
        TweenService:Create(button, TweenInfo.new(0.1), {
            Size = UDim2.new(1, 0, 0, 45)
        }):Play()
        
        if callback then
            callback()
        end
    end)
    
    return button
end

-- ğŸ›¡ï¸ æ— æ•ŒåŠŸèƒ½
local function toggleInvincible()
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then return end
    
    enhancementStates.invincible = not enhancementStates.invincible
    
    if enhancementStates.invincible then
        -- å¼€å¯æ— æ•Œ
        originalProperties.maxHealth = humanoid.MaxHealth
        humanoid.MaxHealth = math.huge
        humanoid.Health = humanoid.MaxHealth
        
        -- è®¾ç½®æ— æ•Œè§†è§‰æ•ˆæœ
        humanoid.BreakJointsOnDeath = false
        humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None
        
        print("ğŸ›¡ï¸ æ— æ•Œæ¨¡å¼å·²æ¿€æ´»")
        invincibleButton.Text = "ğŸ›¡ï¸ æ— æ•Œ: å¼€"
        invincibleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 100)
    else
        -- å…³é—­æ— æ•Œ
        humanoid.MaxHealth = originalProperties.maxHealth
        humanoid.Health = math.min(humanoid.Health, originalProperties.maxHealth)
        
        -- æ¢å¤è§†è§‰è®¾ç½®
        humanoid.BreakJointsOnDeath = true
        
        print("ğŸ›¡ï¸ æ— æ•Œæ¨¡å¼å·²å…³é—­")
        invincibleButton.Text = "ğŸ›¡ï¸ æ— æ•Œ: å…³"
        invincibleButton.BackgroundColor3 = Color3.fromRGB(60, 65, 80)
    end
end

-- ğŸ¦˜ è·³é«˜åŠŸèƒ½
local function toggleHighJump()
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then return end
    
    enhancementStates.highJump = not enhancementStates.highJump
    
    if enhancementStates.highJump then
        -- å¼€å¯è·³é«˜
        originalProperties.jumpPower = humanoid.JumpPower
        humanoid.JumpPower = 100
        
        print("ğŸ¦˜ è¶…çº§è·³è·ƒå·²æ¿€æ´»")
        highJumpButton.Text = "ğŸ¦˜ è·³é«˜: å¼€"
        highJumpButton.BackgroundColor3 = Color3.fromRGB(0, 150, 100)
    else
        -- å…³é—­è·³é«˜
        humanoid.JumpPower = originalProperties.jumpPower
        
        print("ğŸ¦˜ è¶…çº§è·³è·ƒå·²å…³é—­")
        highJumpButton.Text = "ğŸ¦˜ è·³é«˜: å…³"
        highJumpButton.BackgroundColor3 = Color3.fromRGB(60, 65, 80)
    end
end

-- âš¡ åŠ é€ŸåŠŸèƒ½
local function toggleSpeedBoost()
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then return end
    
    enhancementStates.speedBoost = not enhancementStates.speedBoost
    
    if enhancementStates.speedBoost then
        -- å¼€å¯åŠ é€Ÿ
        originalProperties.walkSpeed = humanoid.WalkSpeed
        humanoid.WalkSpeed = 50
        
        print("âš¡ é€Ÿåº¦æå‡å·²æ¿€æ´»")
        speedBoostButton.Text = "âš¡ åŠ é€Ÿ: å¼€"
        speedBoostButton.BackgroundColor3 = Color3.fromRGB(0, 150, 100)
    else
        -- å…³é—­åŠ é€Ÿ
        humanoid.WalkSpeed = originalProperties.walkSpeed
        
        print("âš¡ é€Ÿåº¦æå‡å·²å…³é—­")
        speedBoostButton.Text = "âš¡ åŠ é€Ÿ: å…³"
        speedBoostButton.BackgroundColor3 = Color3.fromRGB(60, 65, 80)
    end
end

-- åˆ›å»ºæŒ‰é’®
local invincibleButton = createEnhancementButton("ğŸ›¡ï¸ æ— æ•Œ: å…³", "ğŸ›¡ï¸", toggleInvincible)
local highJumpButton = createEnhancementButton("ğŸ¦˜ è·³é«˜: å…³", "ğŸ¦˜", toggleHighJump)
local speedBoostButton = createEnhancementButton("âš¡ åŠ é€Ÿ: å…³", "âš¡", toggleSpeedBoost)

invincibleButton.Parent = buttonContainer
highJumpButton.Parent = buttonContainer
speedBoostButton.Parent = buttonContainer

-- è§’è‰²é‡ç”Ÿæ—¶é‡ç½®çŠ¶æ€
player.CharacterAdded:Connect(function(character)
    -- ç­‰å¾…HumanoidåŠ è½½
    character:WaitForChild("Humanoid")
    
    -- é‡ç½®çŠ¶æ€
    enhancementStates.invincible = false
    enhancementStates.highJump = false
    enhancementStates.speedBoost = false
    
    -- æ›´æ–°æŒ‰é’®æ˜¾ç¤º
    invincibleButton.Text = "ğŸ›¡ï¸ æ— æ•Œ: å…³"
    invincibleButton.BackgroundColor3 = Color3.fromRGB(60, 65, 80)
    
    highJumpButton.Text = "ğŸ¦˜ è·³é«˜: å…³"
    highJumpButton.BackgroundColor3 = Color3.fromRGB(60, 65, 80)
    
    speedBoostButton.Text = "âš¡ åŠ é€Ÿ: å…³"
    speedBoostButton.BackgroundColor3 = Color3.fromRGB(60, 65, 80)
end)

-- å…³é—­æŒ‰é’®åŠŸèƒ½
closeButton.MouseButton1Click:Connect(function()
    TweenService:Create(mainFrame, TweenInfo.new(0.3), {
        Size = UDim2.new(0, 0, 0, 0)
    }):Play()
    
    task.wait(0.3)
    mainFrame.Visible = false
end)

-- æ˜¾ç¤º/éšè—UIçš„å¿«æ·é”®ï¼ˆF2é”®ï¼‰
UserInputService.InputBegan:Connect(function(input, processed)
    if not processed and input.KeyCode == Enum.KeyCode.F2 then
        if mainFrame.Visible then
            -- éšè—UI
            TweenService:Create(mainFrame, TweenInfo.new(0.3), {
                Size = UDim2.new(0, 0, 0, 0)
            }):Play()
            task.wait(0.3)
            mainFrame.Visible = false
        else
            -- æ˜¾ç¤ºUI
            mainFrame.Size = UDim2.new(0, 0, 0, 0)
            mainFrame.Visible = true
            TweenService:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
                Size = UDim2.new(0, 300, 0, 200)
            }):Play()
        end
    end
end)

-- æ‹–æ‹½åŠŸèƒ½
local dragging = false
local dragInput, dragStart, startPos

titleLabel.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

titleLabel.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

-- åˆå§‹åŒ–åŠ¨ç”»
mainFrame.Size = UDim2.new(0, 0, 0, 0)
mainFrame.Visible = true
task.wait(0.5)
TweenService:Create(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
    Size = UDim2.new(0, 300, 0, 200)
}):Play()

print("âœ… æ¸¸æˆå¢å¼ºUIåŠ è½½å®Œæˆï¼æŒ‰ F2 é”®æ˜¾ç¤º/éšè—é¢æ¿")
print("ğŸ® åŠŸèƒ½è¯´æ˜ï¼š")
print("  ğŸ›¡ï¸ æ— æ•Œ - é˜²æ­¢è§’è‰²æ­»äº¡")
print("  ğŸ¦˜ è·³é«˜ - å¢å¼ºè·³è·ƒé«˜åº¦")
print("  âš¡ åŠ é€Ÿ - å¢åŠ ç§»åŠ¨é€Ÿåº¦")

-- æ³¨æ„ï¼šå¦‚æœä¸åœ¨Studioä¸­ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½å—Robloxå®‰å…¨é™åˆ¶
if not isStudio then
    print("âš ï¸ æ³¨æ„ï¼šåœ¨å®˜æ–¹æœåŠ¡å™¨ä¸­ï¼ŒæŸäº›åŠŸèƒ½å¯èƒ½å—å®‰å…¨é™åˆ¶")
end